{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { useCallback, useMemo } from 'react';\nimport { get as defaultGet } from './get';\nexport var defaultResponseMapper = function defaultResponseMapper(response) {\n  return response;\n};\nexport var useMapToAsyncPaginatePure = function useMapToAsyncPaginatePure(useCallbackParam, useMemoParam, selectFetchParams) {\n  var url = selectFetchParams.url,\n      _selectFetchParams$qu = selectFetchParams.queryParams,\n      queryParams = _selectFetchParams$qu === void 0 ? {} : _selectFetchParams$qu,\n      _selectFetchParams$se = selectFetchParams.searchParamName,\n      searchParamName = _selectFetchParams$se === void 0 ? 'search' : _selectFetchParams$se,\n      _selectFetchParams$pa = selectFetchParams.pageParamName,\n      pageParamName = _selectFetchParams$pa === void 0 ? 'page' : _selectFetchParams$pa,\n      _selectFetchParams$of = selectFetchParams.offsetParamName,\n      offsetParamName = _selectFetchParams$of === void 0 ? 'offset' : _selectFetchParams$of,\n      _selectFetchParams$ma = selectFetchParams.mapResponse,\n      mapResponse = _selectFetchParams$ma === void 0 ? defaultResponseMapper : _selectFetchParams$ma,\n      _selectFetchParams$ge = selectFetchParams.get,\n      get = _selectFetchParams$ge === void 0 ? defaultGet : _selectFetchParams$ge,\n      _selectFetchParams$in = selectFetchParams.initialPage,\n      initialPage = _selectFetchParams$in === void 0 ? 1 : _selectFetchParams$in,\n      _selectFetchParams$de = selectFetchParams.defaultInitialPage,\n      defaultInitialPage = _selectFetchParams$de === void 0 ? 2 : _selectFetchParams$de;\n  var additional = useMemoParam(function () {\n    return {\n      page: initialPage\n    };\n  }, [initialPage]);\n  var defaultAdditional = useMemoParam(function () {\n    return {\n      page: defaultInitialPage\n    };\n  }, [defaultInitialPage]);\n  var loadOptions = useCallbackParam( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(search, prevOptions, _ref) {\n      var page, params, responseRaw, hasError, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              page = _ref.page;\n              params = _objectSpread(_objectSpread({}, queryParams), {}, _defineProperty({}, searchParamName, search));\n\n              if (pageParamName) {\n                params[pageParamName] = page;\n              }\n\n              if (offsetParamName) {\n                params[offsetParamName] = prevOptions.length;\n              }\n\n              hasError = false;\n              _context.prev = 5;\n              _context.next = 8;\n              return get(url, params);\n\n            case 8:\n              responseRaw = _context.sent;\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](5);\n              hasError = true;\n\n            case 14:\n              if (!hasError) {\n                _context.next = 16;\n                break;\n              }\n\n              return _context.abrupt(\"return\", {\n                options: [],\n                hasMore: false\n              });\n\n            case 16:\n              response = mapResponse(responseRaw, {\n                search: search,\n                prevPage: page,\n                prevOptions: prevOptions\n              });\n              return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, response), {}, {\n                additional: {\n                  page: page + 1\n                }\n              }));\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 11]]);\n    }));\n\n    return function (_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [url, queryParams, searchParamName, pageParamName, offsetParamName, mapResponse, get]);\n  return {\n    loadOptions: loadOptions,\n    additional: additional,\n    defaultAdditional: defaultAdditional\n  };\n};\nexport var useMapToAsyncPaginate = function useMapToAsyncPaginate(params) {\n  return useMapToAsyncPaginatePure(useCallback, useMemo, params);\n};","map":{"version":3,"sources":["D:/PhladRian/frontend/node_modules/react-select-fetch/es/useMapToAsyncPaginate.js"],"names":["_regeneratorRuntime","_defineProperty","_objectSpread","_asyncToGenerator","useCallback","useMemo","get","defaultGet","defaultResponseMapper","response","useMapToAsyncPaginatePure","useCallbackParam","useMemoParam","selectFetchParams","url","_selectFetchParams$qu","queryParams","_selectFetchParams$se","searchParamName","_selectFetchParams$pa","pageParamName","_selectFetchParams$of","offsetParamName","_selectFetchParams$ma","mapResponse","_selectFetchParams$ge","_selectFetchParams$in","initialPage","_selectFetchParams$de","defaultInitialPage","additional","page","defaultAdditional","loadOptions","_ref2","mark","_callee","search","prevOptions","_ref","params","responseRaw","hasError","wrap","_callee$","_context","prev","next","length","sent","t0","abrupt","options","hasMore","prevPage","stop","_x","_x2","_x3","apply","arguments","useMapToAsyncPaginate"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { useCallback, useMemo } from 'react';\nimport { get as defaultGet } from './get';\nexport var defaultResponseMapper = function defaultResponseMapper(response) {\n  return response;\n};\nexport var useMapToAsyncPaginatePure = function useMapToAsyncPaginatePure(useCallbackParam, useMemoParam, selectFetchParams) {\n  var url = selectFetchParams.url,\n      _selectFetchParams$qu = selectFetchParams.queryParams,\n      queryParams = _selectFetchParams$qu === void 0 ? {} : _selectFetchParams$qu,\n      _selectFetchParams$se = selectFetchParams.searchParamName,\n      searchParamName = _selectFetchParams$se === void 0 ? 'search' : _selectFetchParams$se,\n      _selectFetchParams$pa = selectFetchParams.pageParamName,\n      pageParamName = _selectFetchParams$pa === void 0 ? 'page' : _selectFetchParams$pa,\n      _selectFetchParams$of = selectFetchParams.offsetParamName,\n      offsetParamName = _selectFetchParams$of === void 0 ? 'offset' : _selectFetchParams$of,\n      _selectFetchParams$ma = selectFetchParams.mapResponse,\n      mapResponse = _selectFetchParams$ma === void 0 ? defaultResponseMapper : _selectFetchParams$ma,\n      _selectFetchParams$ge = selectFetchParams.get,\n      get = _selectFetchParams$ge === void 0 ? defaultGet : _selectFetchParams$ge,\n      _selectFetchParams$in = selectFetchParams.initialPage,\n      initialPage = _selectFetchParams$in === void 0 ? 1 : _selectFetchParams$in,\n      _selectFetchParams$de = selectFetchParams.defaultInitialPage,\n      defaultInitialPage = _selectFetchParams$de === void 0 ? 2 : _selectFetchParams$de;\n  var additional = useMemoParam(function () {\n    return {\n      page: initialPage\n    };\n  }, [initialPage]);\n  var defaultAdditional = useMemoParam(function () {\n    return {\n      page: defaultInitialPage\n    };\n  }, [defaultInitialPage]);\n  var loadOptions = useCallbackParam( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(search, prevOptions, _ref) {\n      var page, params, responseRaw, hasError, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              page = _ref.page;\n              params = _objectSpread(_objectSpread({}, queryParams), {}, _defineProperty({}, searchParamName, search));\n\n              if (pageParamName) {\n                params[pageParamName] = page;\n              }\n\n              if (offsetParamName) {\n                params[offsetParamName] = prevOptions.length;\n              }\n\n              hasError = false;\n              _context.prev = 5;\n              _context.next = 8;\n              return get(url, params);\n\n            case 8:\n              responseRaw = _context.sent;\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](5);\n              hasError = true;\n\n            case 14:\n              if (!hasError) {\n                _context.next = 16;\n                break;\n              }\n\n              return _context.abrupt(\"return\", {\n                options: [],\n                hasMore: false\n              });\n\n            case 16:\n              response = mapResponse(responseRaw, {\n                search: search,\n                prevPage: page,\n                prevOptions: prevOptions\n              });\n              return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, response), {}, {\n                additional: {\n                  page: page + 1\n                }\n              }));\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 11]]);\n    }));\n\n    return function (_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [url, queryParams, searchParamName, pageParamName, offsetParamName, mapResponse, get]);\n  return {\n    loadOptions: loadOptions,\n    additional: additional,\n    defaultAdditional: defaultAdditional\n  };\n};\nexport var useMapToAsyncPaginate = function useMapToAsyncPaginate(params) {\n  return useMapToAsyncPaginatePure(useCallback, useMemo, params);\n};"]},"metadata":{},"sourceType":"module"}